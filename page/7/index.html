<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>GuKaifeng</title><meta name="author" content="GuKaifeng"><meta name="copyright" content="GuKaifeng"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta property="og:type" content="website">
<meta property="og:title" content="GuKaifeng">
<meta property="og:url" content="https://gukaifeng.me/page/7/index.html">
<meta property="og:site_name" content="GuKaifeng">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gukaifeng.me/img/avatar.png">
<meta property="article:author" content="GuKaifeng">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gukaifeng.me/img/avatar.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://gukaifeng.me/page/7/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"NJKGKBCOFC","apiKey":"05cbbebf02440c4bb8fd59255717595b","indexName":"Hexo algolia search","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"请注意，这篇文章距离上次更新已经过去","messageNext":"天了，内容可能会有些过时。"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}

// https://stackoverflow.com/questions/16839698/jquery-getscript-alternative-in-native-javascript
const getScript = url => new Promise((resolve, reject) => {
  const script = document.createElement('script')
  script.src = url
  script.async = true
  script.onerror = reject
  script.onload = script.onreadystatechange = function() {
    const loadState = this.readyState
    if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
    script.onload = script.onreadystatechange = null
    resolve()
  }
  document.head.appendChild(script)
})</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2020-12-31 15:18:26'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 5.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">101</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">106</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div id="body-wrap"><header class="full_page" id="page-header" style="background-image: url(/img/banner.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">GuKaifeng</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">GuKaifeng</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="mailto:forjobs@gukaifeng.me" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/03/07/%E5%9F%BA%E4%BA%8Ebs4%E5%BA%93%E7%9A%84HTML%E5%86%85%E5%AE%B9%E9%81%8D%E5%8E%86%E6%96%B9%E6%B3%95/" title="基于bs4库的HTML内容遍历方法">基于bs4库的HTML内容遍历方法</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-03-07T01:47:51.000Z" title="发表于 2020-03-07 09:47:51">2020-03-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Python%E7%88%AC%E8%99%AB/">Python爬虫</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/Python/">Python</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/bs4/">bs4</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/BeautifulSoup/">BeautifulSoup</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E7%88%AC%E8%99%AB/">爬虫</a></span></div><div class="content">1. HTML基本格式如果我们把HTML代码做一个结构化的设计，可以发现HTML代码是一个具有树形结构的文本信息。
事实上任何一个HTML或XML文件都是这样标签树形结构，这样的树形结构形成了三种遍历方法。

下行遍历：从根节点开始向叶结点遍历。
上行遍历：从叶结点开始向根节点遍历。
平行遍历：在平级结点之间遍历。

注意，一个标签结点的孩子结点不仅包括标签结点，也包括字符串结点，如&#39;\n&#39;等。


2. 标签树的三种遍历方法
2.1. 下行遍历标签树的下行遍历一共包含三个属性，如下。



属性
说明



.contents
子节点的列表，将&lt;tag&gt;所有儿子结点存入列表。


.children
子节点的迭代类型，与.contents类似，用于循环遍历儿子结点。


.descendants
子孙结点的迭代类型，包含所有子孙结点，用于循环遍历。


12345678&gt;&gt;&gt; soup.head.contents[&#x27;\n&#x27;, &lt;meta content=&quot;text/html; charset=utf-8 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/03/07/BeautifulSoup%E5%BA%93%E5%85%A5%E9%97%A8/" title="BeautifulSoup库入门">BeautifulSoup库入门</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-03-06T16:33:44.000Z" title="发表于 2020-03-07 00:33:44">2020-03-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Python%E7%88%AC%E8%99%AB/">Python爬虫</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/Python/">Python</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/bs4/">bs4</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/BeautifulSoup/">BeautifulSoup</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E7%88%AC%E8%99%AB/">爬虫</a></span></div><div class="content">Beautiful Soup is a Python library for pulling data out of HTML and XML files. It works with your favorite parser to provide idiomatic ways of navigating, searching, and modifying the parse tree. It commonly saves programmers hours or days of work.
1. BeautifulSoup库的安装终端安装方法方法：pip install beautifulsoup4。我这里其实还是用了Anaconda软件，来帮助我管理各种Python包。
下面我们对BeautifulSoup库的安装做一个简单的小测。


1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/03/05/Requests%E5%BA%93%E7%88%AC%E5%8F%96%E5%AE%9E%E4%BE%8B/" title="Requests库爬取实例">Requests库爬取实例</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-03-05T14:46:45.000Z" title="发表于 2020-03-05 22:46:45">2020-03-05</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Python%E7%88%AC%E8%99%AB/">Python爬虫</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/Python/">Python</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E7%88%AC%E8%99%AB/">爬虫</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Requests/">Requests</a></span></div><div class="content">1. 京东商品页面的爬取找到一个京东商品页面，我这里选的是**Apple 2019新品 MacBook Pro 16【带触控栏】九代八核i9 16G 1TB 深空灰 Radeon Pro 5500M显卡 **，链接是https://item.jd.com/100010079900.html。链接可能会失效，不过其他商品页面链接完全同理。
本例仅直接使用最后的完整代码，我们应该在此之前，先对我们爬取的页面做一些前置工作。
前置工作参照后面几个例子，一般是先在交互式页面做前置工作，确认没有问题后，再使用完整代码爬取。
12345678910111213141516import requestsdef getHTMLText(url):    try:        r = requests.get(url)        r.raise_for_status()        r.encoding = r.apparent_encoding        return r.text[:1000] # 页面中只有前面小部分是商品信息，故只取前面一小部分    except:        r ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/03/05/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E7%9A%84%E7%9B%97%E4%BA%A6%E6%9C%89%E9%81%93/" title="网络爬虫的盗亦有道">网络爬虫的盗亦有道</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-03-05T14:46:21.000Z" title="发表于 2020-03-05 22:46:21">2020-03-05</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Python%E7%88%AC%E8%99%AB/">Python爬虫</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/%E7%88%AC%E8%99%AB/">爬虫</a></span></div><div class="content">1. 网络爬虫的尺寸


序号
规模
数据量
爬取速度
第三方库
目的



1
小
小
不敏感
Request库
爬取网页 玩转网页


2
中
中
敏感
Scrapy库
爬取网站 爬取系列网站


3
大
大
非常关键
定制开发
爬取全网 构建搜索引擎


我们平时见到的网络爬虫，小规模的网页爬虫占到了90%以上的比例。
不要看这样的爬虫很小，但是它针对特定网页或一系列的网页，能发挥很大的作用。
2. 网络爬虫引发的问题
骚扰问题：受限于编写水平和目的，网络爬虫将会为web服务器带来巨大的资源开销。
法律风险：服务器上的数据有产权归属，网络爬虫获取数据后牟利将带来法律风险。
泄露隐私：网络爬虫可能具备突破简单访问控制的能力，获得被保护数据从而泄露个人隐私。



3. 网络爬虫的限制
来源审查：判断User-Agent进行限制。
 检查来访HTTP协议头的User-Agent域，只响应浏览器或友好爬虫的访问。

发布公告：Robots协议
 告知所有爬虫网站的爬取策略，要求爬虫遵守。


发布公告仅仅是公告的形式，至于网络爬虫是否遵守，由其自身决定。
通过上面两个方法，互联网实现了 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/03/05/Requests%E5%BA%93%E5%85%A5%E9%97%A8/" title="Requests库入门">Requests库入门</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-03-05T14:46:01.000Z" title="发表于 2020-03-05 22:46:01">2020-03-05</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Python%E7%88%AC%E8%99%AB/">Python爬虫</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/Python/">Python</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E7%88%AC%E8%99%AB/">爬虫</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Requests/">Requests</a></span></div><div class="content">Requests is an elegant and simple HTTP library for Python, built for human beings.
关于Requests库更多信息，点击这里查看Requests库官网。
1. Requsets库的7个主要方法


方法
说明



requests.request()
构造一个请求，支撑以下各方法的基础方法。


requests.get()
获取HTML网页的主要方法，对应于HTTP的GET。


requests.head()
获取HTML网页头信息的方法，对应于HTTP的HEAD。


requests.post()
向HTML网页提交POST请求的方法，对应于HTTP的POST。


requests.put()
向HTML网页提交PUT请求的方法，对应于HTTP的PUT。


requests.patch()
向HTML网页提交局部修改请求，对应于HTTP的PATCH。


requests.delete()
向HTML页面提交删除请求，对应于HTTP的DELETE。




Requests库中其实只有一个方 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/01/20/%E3%80%8A%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95%EF%BC%88%E7%AC%AC2%E7%89%88%EF%BC%89%E3%80%8B%E7%AC%94%E8%AE%B0/" title="《统计学习方法（第2版）》笔记">《统计学习方法（第2版）》笔记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-01-20T14:13:44.000Z" title="发表于 2020-01-20 22:13:44">2020-01-20</time></span></div><div class="content">写在前面　　终于在这个时间，完成了论文的初稿，要紧的事也都告一段落了。也是时候去学些新东西，打算在后面一个月的时间，啃一啃李航这本书，希望可以有所收获吧。　　这篇笔记中大部分内容整理自书中比较重要的内容。对于来自书中的内容，我都在每个段落的末尾以斜体的方式记录了出处页码，以便以后再查阅。
第1篇 监督学习　　本书第1篇介绍监督学习方法，主要包括用于分类、标注与回归问题的方法。这些方法在自然语言处理、信息检索、文本数据挖掘等领域中有着极其广泛的作用。（P5）
第1章 统计学习及监督学习概论1.1 统计学习　　统计学习的方法是基于数据构建概率统计模型从而对数据进行预测与分析。统计学习由监督学习（supervised learning）、无监督学习（unsupervised learning）、强化学习（reinforcement learning）等组成。可以说监督学习、无监督学习方法是最主要的统计学习方法。（P4）　　统计学习方法可以概括如下：从给定的、有限的、用于学习的训练数据集合出发，假设数据是独立同分布产生的；并且假设要学习的模型属于某个函数的集合，称为假设空间；应用某个评价准则， ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2019/05/24/%E3%80%8A%E5%90%B4%E6%81%A9%E8%BE%BE%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E3%80%8B%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/" title="《吴恩达机器学习》课程笔记">《吴恩达机器学习》课程笔记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-05-24T13:54:56.000Z" title="发表于 2019-05-24 21:54:56">2019-05-24</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a></span></div><div class="content">前言此课程在国外的 Coursera 和国内的 网易云课堂 都有。课程核心是完全一样的，仅目录结构有些许差别。不过网易云课堂的在国内看起来更方便一些，所以我就在看网易云课堂学习了，笔记也以网易云课堂的目录结构来写。传送门：网易云课堂《吴恩达机器学习》

第1章 绪论：初识机器学习第2章 单变量线性回归2.1 模型描述2.2 代价函数
Hypothesis:$$h_{\theta}(x)=\theta_0+\theta_1x$$Parameters:$$\theta_0, \theta_1$$Cost Function:$$J(\theta_0, \theta_1)=\frac{1}{2m}\sum_{i=1}^m(h_\theta(x^{(i)})-y^{(i)})^2$$Goal:$$\mathop{minimize}\limits_{\theta_0,\theta_1} \ J(\theta_0, \theta_1)$$注意一下：假设函数 $h_\theta(x)$，对于给定的 $\theta_0, \theta_1$，这一是个关于 $x$ 的函数。代价函数 $J(\theta_0 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2019/04/26/Factorial-Trailing-Zeroes%EF%BC%88%E7%AE%97%E6%9C%AF%E5%9F%BA%E6%9C%AC%E5%AE%9A%E7%90%86%EF%BC%89/" title="LeetCode: 172. 阶乘后的零">LeetCode: 172. 阶乘后的零</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-04-26T06:50:53.000Z" title="发表于 2019-04-26 14:50:53">2019-04-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/LeetCode/">LeetCode</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/LeetCode/">LeetCode</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E6%95%B0%E5%AD%A6/">数学</a></span></div><div class="content">原题链接（英文）：https://leetcode.com/problems/factorial-trailing-zeroes/description/原题链接（中文）：https://leetcode-cn.com/problems/factorial-trailing-zeroes/description/
如果将一个正整数因式分解，那么其末尾的 $0$ 必然可以分解为 $2\times 5$。也就是说，因子中每一对 $2$ 和 $5$ 就对应着末尾的一个 $0$，因为 $2$ 肯定比 $5$ 多。综上，所以我们只要统计因子中有多少个 $5$ 就是结果了。根据算术基本定理中性质(5)：$n!$ 的素因子分解中的素数 $p$ 的幂为 $[\frac{n}{p}]+[\frac{n}{p^2}]+[\frac{n}{p^3}]+\cdots$我们把 $p=5$ 代入，计算出结果即为所求。
12345678910111213int trailingZeroes(int n)&#123;    int count_zeros = 0;    long long p = 5;        ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2019/04/26/LeetCode-98-Validate-Binary-Search-Tree/" title="LeetCode: 98. 验证二叉搜索树">LeetCode: 98. 验证二叉搜索树</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-04-26T05:06:44.000Z" title="发表于 2019-04-26 13:06:44">2019-04-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/LeetCode/">LeetCode</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/LeetCode/">LeetCode</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E6%A0%91/">树</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2/">深度优先搜索</a></span></div><div class="content">原题链接（英文）：https://leetcode.com/problems/validate-binary-search-tree/原题链接（中文）：https://leetcode-cn.com/problems/validate-binary-search-tree/
这个题主要有两种解法：一、利用二叉搜索树的性质：中序遍历序列严格单调递增。二、递归法逐一判断每个结点（子树）是否满足二叉搜索树的特征。

方法一：
我们只需要对此二叉树进行一次中序遍历，查看其中序遍历序列是否是严格单调递增的即可。
我们并不需要将这个树的中序遍历序列记录下来，也可能不需要遍历完整棵树。当我们遍历到某结点时，只需要比较一下看看这个结点的值是否大于上一个遍历的结点的值。因此我们只需要记录上一个遍历的结点的值 $inorder\_last\_val$，并每当遍历过一个结点后，更新该值。如果遍历到某个结点时，发现当前结点的值比 $inorder\_last\_val$ 小，说明这不是一个二叉搜索树，直接中断遍历并返回 $false$；如果遍历完整棵树都没有出现这种情况，那么这就是一个二叉搜索树，返回 $tr ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2019/02/17/%E4%BD%BF%E7%94%A8SSR%E5%AE%9E%E7%8E%B0%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/" title="使用SSR实现科学上网">使用SSR实现科学上网</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2019-02-16T16:00:00.000Z" title="发表于 2019-02-17 00:00:00">2019-02-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E8%8A%B1%E5%BC%8F%E6%8A%98%E8%85%BE%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E8%AE%B0%E5%BD%95%E6%88%96%E7%BB%8F%E9%AA%8C/">花式折腾过程中的一些记录或经验</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/ssr/">ssr</a></span></div><div class="content">一、购买VPSVPS选择谁家的都可以，例如搬瓦工和Vultr，我使用的是Vultr的。系统建议选择Debian，因为本文后面要使用的脚本在Debian上支持一键配置谷歌BBR加速。本篇文章重点在于配置SSR，就不在购买VPS处多费口舌了。
注意，并不是所有的IP地址都可行的，我们在开始配置SSR之前，要确保我们VPS的22号端口为开放状态。如果22号端口是关闭的，那么我们就要摧毁并重建VPS，直到获得一个22号端口为开放的IP地址。你可以用命令行的方式来判断某个端口是否打开，也可以使用一些网站工具来帮助你。这里分享几个可以进行端口扫描的网站：1. https://www.yougetsignal.com/tools/open-ports/2. http://coolaf.com/tool/port3. http://tool.chinaz.com/update.html
二、下载并执行脚本1. 使用SSH连接VPSMacOS使用终端，输入 ssh root@xxx.xxx.xxx.xxx，后面是你的IP地址，再输入密码即可。Windows使用XShell工具，手动输入IP地址，用户名” ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/6/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/8/"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">GuKaifeng</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">101</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">106</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/gukaifeng"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:forjobs@gukaifeng.me" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎大家！每条评论我都有看，只要有时间一定会回复的。共勉。</div></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2020/12/31/macOS-%E4%B8%8B%E9%85%8D%E7%BD%AE-SSH-%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95/" title="macOS 下配置 SSH 免密登录">macOS 下配置 SSH 免密登录</a><time datetime="2020-12-31T06:49:31.000Z" title="发表于 2020-12-31 14:49:31">2020-12-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2020/12/31/macOS-%E4%B8%8B%E4%BD%BF%E7%94%A8-VS-Code-%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" title="macOS 下使用 VS Code 配置远程开发工具">macOS 下使用 VS Code 配置远程开发工具</a><time datetime="2020-12-31T05:39:49.000Z" title="发表于 2020-12-31 13:39:49">2020-12-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2020/12/31/CentOS-8-%E4%B8%BA%E7%AA%97%E5%8F%A3%E6%B7%BB%E5%8A%A0%E6%9C%80%E5%A4%A7-%E6%9C%80%E5%B0%8F%E5%8C%96%E6%8C%89%E9%92%AE/" title="CentOS 8 为窗口添加最大/最小化按钮">CentOS 8 为窗口添加最大/最小化按钮</a><time datetime="2020-12-31T02:51:15.000Z" title="发表于 2020-12-31 10:51:15">2020-12-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2020/12/31/CentOS-8-%E5%9C%A8-root-%E5%92%8C%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E9%97%B4%E5%88%87%E6%8D%A2%E7%9A%84%E6%96%B9%E6%B3%95/" title="CentOS 8 在 root 和普通用户间切换的方法">CentOS 8 在 root 和普通用户间切换的方法</a><time datetime="2020-12-31T02:39:11.000Z" title="发表于 2020-12-31 10:39:11">2020-12-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2020/12/30/%E4%BD%BF%E7%94%A8-PicGo-GitHub-%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%85%8D%E8%B4%B9%E5%9B%BE%E5%BA%8A/" title="使用 PicGo + GitHub 搭建个人免费图床">使用 PicGo + GitHub 搭建个人免费图床</a><time datetime="2020-12-30T01:36:29.000Z" title="发表于 2020-12-30 09:36:29">2020-12-30</time></div></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="card-content"><div class="item-headline"><i class="fas fa-bolt"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="card-widget card-categories"><div class="card-content"><div class="item-headline"><i class="fas fa-folder-open"></i><span>分类</span></div><ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JavaEE/"><span class="card-category-list-name">JavaEE</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JavaSE/"><span class="card-category-list-name">JavaSE</span><span class="card-category-list-count">40</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/LeetCode/"><span class="card-category-list-name">LeetCode</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Python/"><span class="card-category-list-name">Python</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Python%E7%88%AC%E8%99%AB/"><span class="card-category-list-name">Python爬虫</span><span class="card-category-list-count">10</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/VS-Code-%E5%A4%A9%E4%B8%8B%E7%AC%AC%E4%B8%80/"><span class="card-category-list-name">VS Code 天下第一</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/macOS-%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84%E4%B8%80%E4%BA%9B%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/"><span class="card-category-list-name">macOS 系统下的一些操作记录</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%BF%A1%E6%81%AF%E6%A0%87%E8%AE%B0/"><span class="card-category-list-name">信息标记</span><span class="card-category-list-count">1</span></a></li>
            <li class="card-category-list-item more is-center"><a class="card-category-list-link-more" href="/categories/">
                <span>查看更多</span><i class="fas fa-angle-right"></i></a></li>
            </ul></div></div><div class="card-widget card-tags"><div class="card-content"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/ACM/" style="font-size: 1.14em; color: rgb(13, 196, 169)">ACM</a><a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 1.18em; color: rgb(188, 183, 39)">动态规划</a><a href="/tags/%E7%8A%B6%E6%80%81DP/" style="font-size: 1.1em; color: rgb(154, 80, 95)">状态DP</a><a href="/tags/POJ/" style="font-size: 1.34em; color: rgb(166, 149, 147)">POJ</a><a href="/tags/DFS%E5%BA%8F/" style="font-size: 1.1em; color: rgb(46, 188, 166)">DFS序</a><a href="/tags/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84/" style="font-size: 1.14em; color: rgb(142, 102, 196)">树状数组</a><a href="/tags/Python/" style="font-size: 1.38em; color: rgb(38, 42, 124)">Python</a><a href="/tags/bs4/" style="font-size: 1.3em; color: rgb(15, 126, 62)">bs4</a><a href="/tags/BeautifulSoup/" style="font-size: 1.3em; color: rgb(40, 127, 170)">BeautifulSoup</a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 1.42em; color: rgb(129, 187, 85)">爬虫</a><a href="/tags/LightOJ/" style="font-size: 1.14em; color: rgb(0, 114, 164)">LightOJ</a><a href="/tags/%E6%AC%A7%E6%8B%89%E5%87%BD%E6%95%B0/" style="font-size: 1.22em; color: rgb(142, 103, 68)">欧拉函数</a><a href="/tags/%E7%B4%A0%E6%95%B0%E7%AD%9B/" style="font-size: 1.1em; color: rgb(144, 121, 102)">素数筛</a><a href="/tags/%E6%89%A9%E5%B1%95%E6%AC%A7%E5%87%A0%E9%87%8C%E5%BE%97/" style="font-size: 1.1em; color: rgb(137, 68, 170)">扩展欧几里得</a><a href="/tags/Linux/" style="font-size: 1.14em; color: rgb(159, 200, 160)">Linux</a><a href="/tags/CentOS/" style="font-size: 1.14em; color: rgb(7, 79, 105)">CentOS</a><a href="/tags/%E8%B4%AA%E5%BF%83/" style="font-size: 1.1em; color: rgb(186, 106, 132)">贪心</a><a href="/tags/%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91/" style="font-size: 1.1em; color: rgb(17, 126, 136)">斐波那契</a><a href="/tags/LeetCode/" style="font-size: 1.14em; color: rgb(39, 132, 187)">LeetCode</a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 1.1em; color: rgb(8, 10, 36)">数学</a><a href="/tags/%E5%89%8D%E7%BC%80%E5%92%8C/" style="font-size: 1.1em; color: rgb(45, 123, 143)">前缀和</a><a href="/tags/HDU/" style="font-size: 1.22em; color: rgb(146, 51, 44)">HDU</a><a href="/tags/%E8%8E%AB%E6%AF%94%E4%B9%8C%E6%96%AF%E5%8F%8D%E6%BC%94/" style="font-size: 1.14em; color: rgb(119, 4, 183)">莫比乌斯反演</a><a href="/tags/%E6%95%B0%E4%BD%8DDP/" style="font-size: 1.14em; color: rgb(164, 24, 173)">数位DP</a><a href="/tags/HTTP/" style="font-size: 1.1em; color: rgb(132, 73, 133)">HTTP</a><a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 1.18em; color: rgb(167, 52, 197)">服务器</a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 1.1em; color: rgb(146, 142, 134)">计算机网络</a><a href="/tags/Java/" style="font-size: 1.5em; color: rgb(102, 84, 98)">Java</a><a href="/tags/JavaEE/" style="font-size: 1.14em; color: rgb(21, 122, 57)">JavaEE</a><a href="/tags/JDBC/" style="font-size: 1.1em; color: rgb(177, 151, 130)">JDBC</a><a href="/tags/JavaSE/" style="font-size: 1.46em; color: rgb(26, 55, 169)">JavaSE</a><a href="/tags/JCF/" style="font-size: 1.26em; color: rgb(153, 119, 137)">JCF</a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.26em; color: rgb(127, 142, 166)">数据结构</a><a href="/tags/%E5%AE%B9%E5%99%A8/" style="font-size: 1.26em; color: rgb(171, 150, 155)">容器</a><a href="/tags/List/" style="font-size: 1.14em; color: rgb(154, 185, 61)">List</a><a href="/tags/Set/" style="font-size: 1.14em; color: rgb(29, 66, 97)">Set</a><a href="/tags/Map/" style="font-size: 1.14em; color: rgb(93, 47, 194)">Map</a><a href="/tags/Collections/" style="font-size: 1.1em; color: rgb(75, 196, 127)">Collections</a><a href="/tags/Arrays/" style="font-size: 1.1em; color: rgb(176, 31, 12)">Arrays</a><a href="/tags/%E6%95%B0%E7%BB%84/" style="font-size: 1.1em; color: rgb(37, 80, 197)">数组</a></div></div></div><div class="card-widget card-archives"><div class="card-content"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/12/"><span class="card-archive-list-date">十二月 2020</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/04/"><span class="card-archive-list-date">四月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/03/"><span class="card-archive-list-date">三月 2020</span><span class="card-archive-list-count">59</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/01/"><span class="card-archive-list-date">一月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2019/05/"><span class="card-archive-list-date">五月 2019</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2019/04/"><span class="card-archive-list-date">四月 2019</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2019/02/"><span class="card-archive-list-date">二月 2019</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2018/10/"><span class="card-archive-list-date">十月 2018</span><span class="card-archive-list-count">17</span></a></li><li class="card-archive-list-item more is-center"><a class="card-archive-list-link-more" href="/archives/">
              <span>查看更多</span><i class="fas fa-angle-right"  ></i></a></li></ul></div></div><div class="card-widget card-webinfo"><div class="card-content"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">101</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2016-11-20T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2020-12-31T07:18:25.679Z"></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2016 - 2020 By GuKaifeng</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>function subtitleType () {
  fetch('https://api.btstu.cn/yan/api.php?charset=utf-8&encode=json')
    .then(response => response.json())
    .then(data => {
      if (true) {
        var sub = "Never put off till tomorrow what you can do today.".length == 0 ? new Array() : "Never put off till tomorrow what you can do today.".split(',')
        var both = sub.unshift(data.text)
        typed = new Typed('#subtitle', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: false,
          backSpeed: 50,
        })
      } else {
        document.getElementById('subtitle').innerHTML = data.text
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.17.0/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<[^>]+>/g,"") // remove html tag
    content = content.replace(/(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|jpeg|gif|png|webp)/g, '') // remove image link
    content = content.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi, '') // remove url

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    
    let defaultIcon = '?d=mp'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          let name = 'src'
          if(false) {
            name = 'data-lazy-src'
          }
          result += `<a href='${array[i].url}' class="thumbnail"><img ${name}='${getIcon(array[i].avatar, array[i].mail)}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick}</span><time> / ${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
      let serverURL = ''
      if (false) {
        serverURL = ''
      } else {
        serverURL = 'https://Bw3B2xti.api.lncldglobal.com'
      }

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": 'Bw3B2xtiOk0tPYNFgGK5b2lU-gzGzoHsz',
        "X-LC-Key": 'AhpDyCsoTrgQHeT7FVeb6Rt9',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': e.QQAvatar,
            'content': changeContent(e.comment),
            'mail': e.mail,
            'nick': e.nick,
            'url': e.url,
            'date': e.createdAt,
          }
        })
        saveToLocal.set('leancloud-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('leancloud-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script src="/js/custom.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script></div></body></html>